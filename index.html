<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flashcard App - Multi Day</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #f4f4f4;
    }
    select {
      font-size: 1.2em;
      margin-bottom: 20px;
      padding: 5px;
    }
    .flashcard {
      width: 90%;
      max-width: 400px;
      height: 250px;
      margin: 20px auto;
      perspective: 1000px;
    }
    .card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      border: 4px solid forestgreen;
      border-radius: 10px;
      background: white;
      font-size: 1.5em;
      box-sizing: border-box;
    }
    .card.flipped {
      transform: rotateY(180deg);
    }
    .card .front,
    .card .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box;
      word-wrap: break-word;
      white-space: normal;
      line-height: 1.4;
      word-break: break-word;
      z-index: 1;
    }
    .card .back {
      transform: rotateY(180deg);
      background-color: #e9f5ff;
    }
    .buttons {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .buttons button {
      font-size: 1.2em;
      padding: 10px 20px;
      background-color: blue;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #debugText {
      margin-top: 20px;
      font-size: 0.9em;
      color: #444;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Vocabulary Flashcards</h1>

  <label for="daySelector">Select Day:</label>
  <select id="daySelector"></select>

  <div class="flashcard" id="flashcard">
    <div class="card" id="card">
      <div class="front" id="cardFront"></div>
      <div class="back" id="cardBack"></div>
    </div>
  </div>

  <div class="buttons">
    <button id="prevBtn">Back</button>
    <button id="nextBtn">Next</button>
  </div>


  <script>
    const sheetGIDs = {
      "Day 1": "0",
      "Day 2": "1069422382",
      "Day 3": "978107342",
      "Day 4": "1730664010",
      "Day 5": "925305613",
      "Day 6": "379112084",
      "Day 7": "616830407",
      "Day 8": "1227399126",
      "Day 9": "137441837",
      "Day 10": "1319726612",
      "Day 11": "197654488",
      "Day 12": "1075314946",
      "Day 13": "107667758",
      "Day 14": "908384207",
      "Day 15": "371348435",
      "Day 16": "687873674",
      "Day 17": "949162521",
      "Day 18": "1593187186",
      "Day 19": "1387521064",
      "Day 20": "338379882",
      "A-Z Word Bank": "241943186"

    };

    const dropdown = document.getElementById("daySelector");
    const card = document.getElementById("card");
    const front = document.getElementById("cardFront");
    const back = document.getElementById("cardBack");
    const flashcard = document.getElementById("flashcard");
    const debugText = document.getElementById("debugText");
    let cards = [];
    let currentIndex = 0;

    for (const day in sheetGIDs) {
      const option = document.createElement("option");
      option.value = day;
      option.textContent = day;
      dropdown.appendChild(option);
    }

    dropdown.addEventListener("change", () => {
      loadCSV(sheetGIDs[dropdown.value]);
    });

    flashcard.addEventListener("click", () => {
      card.classList.toggle("flipped");
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % cards.length;
      showCard(false);
    });

    document.getElementById("prevBtn").addEventListener("click", () => {
      currentIndex = (currentIndex - 1 + cards.length) % cards.length;
      showCard(false);
    });

    function loadCSV(gid) {
      const url = `https://docs.google.com/spreadsheets/d/e/2PACX-1vSGNFbDIBLDV2acrLKJ8omnC2bmS-lncnNAAS142PLDEMcOWouW3Lm6RJAUSiMe6Vd8VsfVYV-1p3Kg/pub?gid=${gid}&single=true&output=tsv`;
      fetch(url)
        .then(res => res.text())
        .then(data => {
          cards = data
            .trim()
            .split("\n")
            .slice(1)
            .map(line => {
              const parts = line.replace(/\r/g, "").trim().split("\t");
              if (parts.length >= 2) {
                const word = parts[0].trim();
                const definition = parts[1].trim();
                return [word, definition];
              }
              return null;
            })
            .filter(Boolean);

          currentIndex = 0;
          if (cards.length > 0) {
            showCard(false);
          } else {
            front.textContent = "No data available.";
            back.textContent = "";
            card.classList.remove("flipped");
            debugText.textContent = "(debug: no data)";
          }
        })
        .catch(err => {
          console.error("Failed to load CSV:", err);
          front.textContent = "Error loading data.";
          back.textContent = "";
          card.classList.remove("flipped");
          debugText.textContent = `Error: ${err.message}`;
        });
    }

    function showCard(flip = true) {
      if (!cards[currentIndex]) return;
      const [word, definition] = cards[currentIndex];
      front.textContent = word;
      back.textContent = definition;
      debugText.textContent = `DEBUG:\nWord: ${word}\nDefinition: ${definition}`;
      if (flip) card.classList.remove("flipped");
    }

    dropdown.value = "Day 1";
    loadCSV(sheetGIDs["Day 1"]);
  </script>
  <img src="logo.png" alt="Logo" id="logo">

</body>
</html>
